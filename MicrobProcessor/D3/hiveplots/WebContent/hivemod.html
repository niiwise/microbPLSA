<!DOCTYPE html>
<meta charset="utf-8">
<style>

.link {
  fill: none;
  stroke-width: 1px;
}

.axis, .node {
  stroke: #000;
  stroke-width: 0.5px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/d3.hive.v0.min.js"></script>
<script src="nodesmod.js"></script>
<script src="linksmod.js"></script>
<script>

var width = 960
    height = 500
    innerRadius = 40,
    outerRadius = 240;
    
var oplink = 0.9
	opnode = 0.8
	bkgcolor = "black"
	//bkgcolor = "#f5f5f5" //white background
    modulecolor = ["#bdbdbd","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]
    //num_axis = 6	//want 6 axis
    num_axis = 5	//want 5 axis
	
var //angle = d3.scale.ordinal().domain(d3.range(num_axis)).rangePoints([0, 2 * Math.PI]),
	//angles = [-0.35, 0.35, 1.75, 2.44, 3.84, 4.54], // for 6 axis
	angles = [0, 1.75, 2.44, 3.84, 4.54], // for 5 axis
    radius = d3.scale.linear().range([innerRadius, outerRadius]);

var angle = d3.scale.ordinal()
	.domain(d3.range(num_axis))
	.range(angles);

var colors = d3.scale.linear()
	.domain(d3.range(0,modulecolor.length,1.0))
	.range(modulecolor);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .style("background-color", bkgcolor)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

svg.selectAll(".axis")
    .data(d3.range(3))
  .enter().append("line")
    .attr("class", "axis")
    .attr("transform", function(d) { return "rotate(" + degrees(angle(d)) + ")"; })
    .attr("x1", radius.range()[0])
    .attr("x2", radius.range()[1]);

svg.selectAll(".link")
    .data(links)
  .enter().append("path")
    .attr("class", "link")
    .attr("d", d3.hive.link()
    .angle(function(d) { return angle(d.x); })
    .radius(function(d) { return radius(d.y); }))
    .style("opacity", oplink)
    .style("stroke", function(d) { return colors(d.source.z); });

svg.selectAll(".node")
    .data(nodes)
  .enter().append("circle")
    .attr("class", "node")
    .attr("transform", function(d) { return "rotate(" + degrees(angle(d.x)) + ")"; })
    .attr("cx", function(d) { return radius(d.y); })
    .attr("r", 3)
    .style("fill", function(d) { return colors(d.z); })
    .style("opacity", opnode);

function degrees(radians) {
  return radians / Math.PI * 180 - 90;
}

</script>