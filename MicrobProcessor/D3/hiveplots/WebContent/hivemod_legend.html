
<!comment Whole network legend>

<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/d3.hive.v0.min.js"></script>
<script>

var SVGTitle = 'Hive Plot LEGEND'

var nodes = [
	{name: "OTU X", axis: 0, pos: 0.9, mod: 1, ind: 1},//0
	{name: "OTU X", axis: 1, pos: 0.9, mod: 1, ind: 1},//1
	{name: "OTU Y", axis: 2, pos: 0.1, mod: 1, ind: 1},//2
	{name: "OTU Y", axis: 3, pos: 0.1, mod: 1, ind: 1},//3
	{name: "OTU Z", axis: 2, pos: 0.5, mod: 1, ind: 1},//4
	{name: "OTU Z", axis: 3, pos: 0.5, mod: 1, ind: 1},//5
  ]

var links = [
  {source: nodes[1], target: nodes[4]},
  {source: nodes[3], target: nodes[4]},
  {source: nodes[2], target: nodes[5]},
  ]


var show_indicator = false

var width = 400
    height = 300
    innerRadius = 20,
    outerRadius = 100;

var linkfill = "none"
	linkwidth = 1
	oplink = 1
	opnode = 1
	bkgcolor = "white"
    modulecolor = ["black", "grey"]
    num_axis = 6	//want 6 axis
    indYES = "orange"
    indNO = "blue"
    indNULL = "grey";
	
var angle = [-0.35, 0.35, 1.75, 2.44, 3.84, 4.54], // for 6 axis
    radius = d3.scale.linear().range([innerRadius, outerRadius]);

var angles = d3.scale.ordinal()
	.domain(d3.range(num_axis))
	.range(angle);

var colors = d3.scale.linear()
	.domain(d3.range(0,modulecolor.length,1.0))
	.range(modulecolor);

var svg = d3.select("body").append("svg")
	.attr("class", SVGTitle)
    .attr("width", width)
    .attr("height", height)
    .style("background-color", bkgcolor)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

svg.selectAll(".axis")
    .data(angle)
  .enter().append("line")
    .attr("class", "axis")
    .attr("transform", function(d) { return "rotate(" + degrees(angles(d)) + ")"; })
    .attr("x1", radius.range()[0])
    .attr("x2", radius.range()[1])
    .attr("stroke-width",0.7)
    .attr("stroke", "black");

svg.selectAll(".link")
    .data(links)
  .enter().append("path")
    .attr("class", "link")
    .attr("d", d3.hive.link()
    .angle(function(d) { return angles(d.axis); })
    .radius(function(d) { return radius(d.pos); }))
    .style("fill", linkfill)
    .style("stroke-opacity", oplink)
    .style("stroke", function(d) { return colors(d.source.mod); })
    .style("stroke-width", linkwidth);
  
svg.selectAll(".node")
    .data(nodes)
  .enter().append("circle")
    .attr("class", "node")
    .attr("transform", function(d) { return "rotate(" + degrees(angles(d.axis)) + ")"; })
    .attr("cx", function(d) { return radius(d.pos); })
    .attr("r", 3)
    .attr("stroke-width", 0.3)
    .attr("stroke", "grey")
    .style("fill-opacity", function(d) {
    	if (show_indicator){
			if (d.ind == 0){
				return opnode*0.3}
			else {return opnode}
			}
    	else{return opnode}
    	})
	 .style("fill", function(d) { 
	 	if (show_indicator){
			if (d.mod == d.ind){
				return indYES}
			else if (d.ind > 0){
				return indNO}
			else {return colors(d.mod)}
			}
    	else {return colors(d.mod)}
    	})

function degrees(radians) {
  return radians / Math.PI * 180 - 90;
}

</script>